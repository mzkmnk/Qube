# Q CLI 動作仕様

## コマンドモード

### 単発実行モード
```bash
# 自然言語をコマンドに変換
echo "list all files" | q translate
# => find . -type f

# ヘルプ表示
q --help
```

### インタラクティブモード（chat）
```bash
q chat
# => MCPサーバー初期化
# => プロンプト表示
# => 継続的な対話が可能
```

## Qubeで実装すべき機能

### 1. モード切替
- **コマンドモード**: 単発のコマンド実行（現在のspawnQ）
- **セッションモード**: 永続的なプロセス（QSessionクラス）

### 2. UIコンポーネント
- **ヘッダー**: "Qube - Amazon Q CLI Interface"
- **出力パネル**: ストリーミング応答の表示
- **入力フィールド**: コマンド入力
- **ステータスバー**: 接続状態、モード表示

### 3. キーバインディング
- `Enter`: コマンド実行
- `Ctrl+C`: 現在の処理を中断
- `Ctrl+D`: アプリ終了
- `Ctrl+L`: 画面クリア
- `↑/↓`: 履歴ナビゲーション
- `Ctrl+J`: 複数行入力モード
- `Ctrl+S`: ファジー検索

### 4. ストリーム処理
- ANSIエスケープシーケンスの処理
- プログレスインジケーター（⠋ ⠙ ⠹ ⠸ ⠼ ⠴ ⠦ ⠧ ⠇ ⠏）
- カラー出力の保持
- リアルタイムストリーミング